# Lab 2 Allocator 
## Про Allocator

Розподільника пам'яті загального призначення повинен виконувати: 
- виділення блоку пам'яті заданого розміру, 
- звільнення виділеного блоку пам'яті, 
- зміну розміру виділеного блоку пам'яті.
Ці функції складають загальний інтерфейс розподільника пам'яті загального призначення.

Кожний блок має header i data. Header завжди фіксованого розміру 12 байтів. Всі блоки вирівняні за 4 байтами.
Щоб виділити 8 байті пам'яті, нам потрібно 24 байта вільної пам'яті.
Структура header:
> [memory size(4 bytes), previous block memory size(4 bytes), boolean is block free(1 byte), placeholder(3 bytes)]

### Опис алгоритму

#### Allocate function
```C#
void* mem_alloc(size_t size)
```

Коли викликається функція `mem_alloc`, вона шукає сторінку з блоком, розмір якого підходить або пусту сторінку.
Якщо вона знаходить таку сторінку то вона шукає пустий блок і займає його. Якщо вільний блок не знайдено, функція продовжує пошук сторінки.
Якщо знайдено пусту сторінку то в ній виділяється заданий розмір для блоку.

### Reallocate function
```C#
void* mem_realloc(void* addr, size_t size)
```
Ця функція виклику насамперед вирішує, потрібно зменшувати блок чи збільшувати його.
Блок позначається як "вільний", і виділяється новий блок (який називається alloc(size)).

### Free memory function
```C#
void mem_free(void* addr)
```
Ця функція позначає блок вільним.

## Приклад

Всі outputs стану пам'яті виконуються за допомогою функції `mem_dump`, яка, в основному,
проходить через нашу heap і виводить стани всіх існуючих блоків.

Виділення 24 байтів пам'яті.

##### Код
```C#
PageMemoryAllocator allocator = new PageMemoryAllocator(1024);
            int ind1 = allocator.MemAllocate(24);
            allocator.WriteArray(ind1, new byte[] { 1, 4, 8, 5 });
            allocator.MemRealloc(ind1, 48);
            Console.WriteLine(allocator.MemDump());
            Console.ReadKey();
```

##### Output
![allocating 24 bytes](1.png)
